<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous"><title>Chatapp üí¨</title><style>@import"https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap";*{margin:0;padding:0;box-sizing:border-box;scroll-behavior:smooth}body{font-family:Open Sans,sans-serif;display:grid;place-items:center;background-color:#ebebeb}.title{margin:20px 0}.main{border:8px solid #dddddd;border-radius:24px;overflow:hidden}.name{display:flex;font-size:32px;font-weight:700;padding:8px 16px;color:#7e7e7e;background-color:#ebebeb}.name>span{color:#bbb}.name-input{font-size:24px;font-weight:700;color:#7e7e7e;flex-grow:1;border:none;margin:0 12px;outline:none;background-color:#ebebeb}.message-container{display:flex;flex-direction:column;background-color:#f6f6f6;width:400px;height:600px;overflow-y:scroll;overflow-x:hidden}.message-left,.message-right{list-style:none;padding:8px 12px;margin:12px;max-width:250px;font-size:18px;word-wrap:break-word}.message-left{border-radius:20px 20px 20px 0;align-self:flex-start;background-color:#fff;box-shadow:-2px 2px 4px #dcdcdc}.message-right{border-radius:20px 20px 0;align-self:flex-end;background-color:#2d2d2d;box-shadow:2px 2px 4px #dcdcdc;color:#f6f6f6}.message-left>p>span,.message-right>p>span{display:block;font-style:italic;font-size:12px;margin-top:4px}.feedback{font-style:italic;font-size:14px;padding:0 16px 16px;color:#2d2d2d;text-align:center}.message-form{display:flex;justify-content:space-between;width:400px}.message-input{flex-grow:1;height:48px;font-size:16px;border:none;outline:none;padding:0 12px;background-color:#fff}.send-button{height:48px;font-size:16px;border:none;padding:0 20px;outline:none;background-color:#fff;cursor:pointer}.v-divider{height:48px;width:2px;background-color:#f6f6f6}.clients-total{margin:20px 0;color:#7e7e7e}
</style><script type="module">const n=io();n.on("connect",()=>{console.log("SUCCESS: Socket connected to the server!",n.id)});n.on("connect_error",e=>{console.error("ERROR: Socket connection failed.",e.message)});const d=document.getElementById("client-total"),o=document.getElementById("message-container"),a=document.getElementById("name-input"),i=document.getElementById("message-form"),s=document.getElementById("message-input"),r=new Audio("/message-tone.mp3");i.addEventListener("submit",e=>{e.preventDefault(),g()});n.on("clients-total",e=>{d.innerText=`Total Clients: ${e}`});function g(){if(console.log("sendMessage called"),s.value==="")return;const e={name:a.value,message:s.value,dateTime:new Date};n.emit("message",e),c(!0,e),s.value=""}n.on("chat-message",e=>{r.play(),c(!1,e)});function c(e,t){if(typeof moment>"u"){console.error("ERROR: moment.js is not loaded!");return}l();const m=`
      <li class="${e?"message-right":"message-left"}">
          <p class="message">
            ${t.message}
            <span>${t.name} ‚óè ${moment(t.dateTime).fromNow()}</span>
          </p>
        </li>
        `;o.innerHTML+=m,u()}function u(){o.scrollTo(0,o.scrollHeight)}s.addEventListener("focus",e=>{n.emit("feedback",{feedback:`${a.value} is typing a message`})});s.addEventListener("keypress",e=>{n.emit("feedback",{feedback:`${a.value} is typing a message`})});s.addEventListener("blur",e=>{n.emit("feedback",{feedback:""})});n.on("feedback",e=>{l();const t=`
        <li class="message-feedback">
          <p class="feedback" id="feedback">${e.feedback}</p>
        </li>
  `;o.innerHTML+=t});function l(){document.querySelectorAll("li.message-feedback").forEach(e=>{e.parentNode.removeChild(e)})}
</script></head> <body> <h1 class="title">iChat üí¨</h1> <div class="main"> <div class="name"> <span><i class="far fa-user"></i></span> <input type="text" id="name-input" class="name-input" value="anonymous" maxlength="20"> </div> <ul class="message-container" id="message-container"></ul> <form class="message-form" id="message-form" autocomplete="off"> <input type="text" name="message" id="message-input" class="message-input" placeholder="Enter message"> <div class="v-divider"></div> <button type="submit" class="send-button">
send <span><i class="fas fa-paper-plane"></i></span> </button> </form> </div> <h3 class="clients-total" id="client-total">Total clients: 0</h3> <script src="https://cdn.socket.io/4.7.5/socket.io.min.js" integrity="sha384-2huaZvOR9iDzHqslqwpR87isEmrfxqyWOF7hr7BY6KG0+hVKLoEXMPUJw3ynWuhO" crossorigin="anonymous"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.28.0/moment.min.js" integrity="sha512-Q1f3TS3vSt1jQ8AwP2OuenztnLU6LwxgyyYOG1jgMW/cbEMHps/3wjvnl1P3WTrF3chJUWEoxDUEjMxDV8pujg==" crossorigin="anonymous"></script> </body> </html>